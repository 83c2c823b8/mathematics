\section{三角圏の公理}
\begin{defn}
	圏$\C$が前加法圏(preadditive category)とは，以下を満たす場合である．
	\vspace{-3mm}
	\begin{itemize}
		\item[(i)]
			任意の$E,F\in\C$に対して，$\Hom_{\C}(E,F)$がアーベル群になる．
		\item[(ii)]
			任意の$E,F,G\in\C$に対して，
		\[
			\begin{array}{ccccc}
				\Hom_{\C}(F,G) \times \Hom_{\C}(E,F) & \longrightarrow & \Hom_{\C}(E,G) \\
				\rotatebox{90}{\in}& &\rotatebox{90}{\in}\\
															(g, f) & \longmapsto & g \circ f
					\end{array}
\]
が双線型である．つまり，任意の$g,g'\in\Hom_{\C}(F,G),\ f,f'\in\Hom_{\C}(E,F)$に対して，
\begin{gather}
	(g+g')\circ f = g\circ f + g'\circ f\\
	g\circ(f+f') = g\circ f + g\circ f'
\end{gather}
	\end{itemize}
\end{defn}
が成り立つ．

\begin{defn}
	前加法圏$\C$が加法圏(additive category)であるとは，
	\vspace{-3mm}
	\begin{itemize}
	\item[(i)]零対象(始対象かつ終対象)である$0\in\C$をを持つ．
	\item[(ii)]任意の対象$E,F\in\C$に対し直和$E\oplus F$が存在する．
	\end{itemize}
	\vspace{-3mm}
\end{defn}

\begin{defn}
	$\C$を加法圏とする．このとき，$f\in\Hom_{\C}(E,F)$の核(kernel)とは$\Ker f\in\C$と$\ker f\in\Hom_{\C}(\Ker f,E)$の組$(\Ker f,\ker f)$であって，以下の普遍性をみたすものである．
	\[\begin{tikzcd}
		K\ar[rd,"k"]\ar[d,"\exists !h",dotted,swap]\\
		\Ker f\ar[r,"\ker f",swap]&E\ar[r,"f",swap]&F
\end{tikzcd}\]
\begin{itemize}
	\item[(i)]
		$f\circ\ker f=0$
	\item[(ii)]
		任意の$K\in\C$と$k\in\Hom_{\C}(K,E)$で$f\circ k=0$を満たすものに対して，一意に$h\in\Hom_{\C}(K,\Ker f)$が存在して，$\ker f\circ h=k$となる．\\
$f\in\Hom_{\C}(E,F)$の$\C$での反対圏での核を余核(cokernel)とよび，$(\Cok f,\cok f)$と記す．
\end{itemize}
\end{defn}

\begin{defn}
	加法圏$\A$がアーベル圏(Abelian category)であるとは以下を満たす場合である．
	\vspace{-3mm}
	\begin{itemize}
		\item[(i)]
			$\A$の任意の射$f$に対し，核$\Ker f$と余核$\Cok f$が存在する．
		\item[(ii)]
			$\A$の任意の射$f$に対し，自然な同型\ $\Coim(f)\simeq\Im f$が存在する．
	\end{itemize}
\end{defn}

\begin{defn}
	$\D$を加法圏，$[1]$を自己同値函手とする．
	完全三角形と呼ばれる$\D$における三角形の集合を備えた，以下の性質をみたす組$(\D,[1])$を三角圏と呼ぶ$$$$
	\vspace{-3mm}
	\begin{itemize}
		\item[(i)]
			任意の$E\in\D$に対して，
			\[E\xrightarrow{\id_E}E\rightarrow 0 \rightarrow E[1]\]
			は完全三角形．
		\item[(ii)]
			\[
		\begin{tikzcd}
			E_1\ar[r]\ar[d,"f"]& E_2\ar[r]\ar[d,"g"]& E_3\ar[r]\ar[d,"h"] & E_1[1]\ar[d,"f\texttt{[1]}"]\\
			F_1\ar[r]& F_2\ar[r]& F_3\ar[r] & F_1[1]\\
		\end{tikzcd}
			\]
			上の可換図式において，$f,g,h$が同型で$E_1\rightarrow E_2\rightarrow E_3 \rightarrow E_1[1]$が完全三角形なら$F_1\rightarrow F_2\rightarrow F_3 \rightarrow F_1[1]$も完全三角形
		\item[(iii)]
			任意の$E\xrightarrow{f}F$は
			\[E\xrightarrow{f} F\rightarrow G \rightarrow E[1]\]
		と完全三角形に拡張できる．
	\item[(iv)]
		\[
			E_1\xrightarrow{u} E_2\xrightarrow{v} E_3\xrightarrow{w}  E_1[1]
	\]
	が完全三角形であることと
	\[
		E_2\xrightarrow{v} E_3\xrightarrow{w} E_1[1]\xrightarrow{-u[1]}  E_2[1]
	\]
	が完全三角形であることが同値．
	\item[(v)]
		\[
		\begin{tikzcd}
			E_1\ar[r]\ar[d,"f"]& E_2\ar[r]\ar[d,"g"]& E_3\ar[r]\ar[d,"h",dotted] & E_1[1]\ar[d,"f\texttt{[1]}"]\\
			F_1\ar[r]& F_2\ar[r]& F_3\ar[r] & F_1[1]\\
		\end{tikzcd}
	\]
	2つの完全三角形と図式を可換にする$f,g$が存在したとき，すべての四角形を可換にする$h$が存在する．

	\item[(vi)]
		八面体公理\\
			\[
				\begin{tikzcd}[row sep=5pt]
			E \ar[r,"f"]& F\ar[r,"h"]& X \ar[r]& E[1]\\
			E \ar[r,"g\circ f"]& G\ar[r,"l"]& Y \ar[r]& E[1]\\
			F \ar[r,"g"]& G\ar[r,"k"]& Z \ar[r]& F[1]\\
		\end{tikzcd}
			\]
			上記の3つの完全三角形に対して，以下の図式のすべての四角形を可換にし，4行目を完全三角形にするような$u\in\Hom_{\D}(X,Y),v\in\Hom_{\D}(Y,Z),w\in\Hom_{\D}(Z,X[1])$が存在する．
			\[
		\begin{tikzcd}
			E \ar[r,"f"]\ar[d,equal]& F\ar[r,"h"]\ar[d,"g",swap]& X\ar[d,"u",dotted] \ar[r]& E[1]\ar[d,equal]\\
			E \ar[r,"g\circ f"]\ar[d,"f",swap]& G\ar[r,"l"]\ar[d,equal]& Y\ar[d,"v",dotted] \ar[r]& E[1]\ar[d,"f\texttt{[1]}"]\\
			F \ar[r,"g"]\ar[d,"h",swap]& G\ar[r,"k"]\ar[d,"l",swap]& Z \ar[r]\ar[d,equal]& F[1]\ar[d,"h\texttt{[1]}"]\\
			X \ar[r,"u",dotted]& Y\ar[r,"v",dotted]& Z \ar[r,"w",dotted]& X[1]\\
		\end{tikzcd}
			\]
	\end{itemize}
\end{defn}

\begin{lemm}
	三角圏$\D$において，任意の射$f\colon E\rightarrow F$
	\[E\xrightarrow{f} F\xrightarrow{g} G\rightarrow E[1]\]
\end{lemm}

\begin{defn}
	$\D$を三角圏，$\C$をその充満部分加法圏としたとき以下の用語を定義する．
	\begin{itemize}
		\item[(i)]
			$\C$の$\D$における右（左）直交部分圏(right (left) orthogonal subcategory)$\C^\perp,{}^\perp\C$を$\D$の充満部分圏として
			\[\C^\perp\coloneq \{F\in\D\mid\forall E\in\C,\ \Hom_{\D}(E,F)=0\}\]
			\[{}^\perp\C\coloneq \{E\in\D\mid\forall F\in\C,\ \Hom_{\D}(E,F)=0\}\]
		\item[(ii)]
			$\C$が$\D$の狭義充満部分圏(strictly full subcategory)であるとは以下を満たすときである．\\
			$E\in\C$かつ$F\in\D$に対して$E\simeq F$ならば$F\in\C$
		\item[(iii)]
			$\C$の$\D$におけるthick閉包とは直和因子を取る操作で閉じている最小の狭義充満部分三角圏のことである．それを$\thick \C$と記す．
		\item[(iv)]
			$\C$がthick部分圏(thick subcategory)であるとは，$\C = \thick\C$が成り立つときをいう．
	\end{itemize}
\end{defn}
$E^\bullet\in\D^b(\A)$に対して，$\tau_{\le i},\ \tau_{> i},\sigma_{\le i}, \sigma_{> i}$を
\begin{gather*}
	\tau_{\le i}E^\bullet\coloneq (\cdots \rightarrow E^{i-2}\rightarrow E^{i-1}\rightarrow \Ker d_E^i\rightarrow 0\rightarrow \cdots)\\
	\tau_{> i}E^\bullet\coloneq (\cdots \rightarrow 0\rightarrow \Im d_E^i\rightarrow E^{i+1}\rightarrow E^{i+2}\rightarrow \cdots)\\
	\sigma_{\le i}E^\bullet\coloneq (\cdots \rightarrow E^{i-2}\rightarrow E^{i-1}\rightarrow E^i\rightarrow 0\rightarrow \cdots)\\
	\sigma_{> i}E^\bullet\coloneq (\cdots \rightarrow 0\rightarrow E^{i+1}\rightarrow E^{i+2}\rightarrow E^{i+3}\rightarrow \cdots)
\end{gather*}
と定めると
\begin{gather}
	\tau_{\le i}E^\bullet\rightarrow E^\bullet \rightarrow\tau_{>i}E^\bullet\rightarrow \tau_{\le i}E^\bullet[1]\label{canonical}\\
	\sigma_{>i}E^\bullet\rightarrow E^\bullet \rightarrow\sigma_{\le i}E^\bullet\rightarrow \sigma_{> i}E^\bullet[1]\label{stupid}
\end{gather}
が完全三角形となる．

\begin{defn}
	アーベル圏$\A$と三角圏$\D$に対して，Grothendieck群$K(\A)$と$K(\D)$をそれぞれ対象たちで自由生成された群を以下の群で割ったものであると定める．
	\[\langle[F]-[E]-[G]\mid 短完全列\ 0\rightarrow E\rightarrow F\rightarrow G\rightarrow 0\ が\A で存在する．\rangle\]
	\[\langle [F]-[E]-[G]\mid 完全三角形\  E\rightarrow F\rightarrow G\rightarrow E[1]\ が\D で存在する．\rangle\]

\begin{lemm}
	$E^\bullet\in D^b(\A)$に対し，Grothendieck群$K(D^b(\A))$の中で
	\[[E^\bullet] = \sum_i(-1)^i[\H^i(E^\bullet)] = \sum_{i}(-1)^i[E^i]\]
\end{lemm}
\begin{proof}
	完全三角形(\ref{stupid})により，
	\[[E^\bullet] = [\sigma_{>i}E^\bullet] + [\sigma_{\le i}E^\bullet]\]
	が成り立つ．$E^\bullet$は有界複体なので，繰り返し適用すれば
	\[[E^\bullet] = \sum_{i\in\ZZ}[E^i[-i]]\]
	完全三角形$E\rightarrow 0\rightarrow E[1]\rightarrow E[1]$を考えれば，$[E] = -E[1]$より$[E^\bullet] = \sum_{i\in\ZZ}(-1)^i[E^i]$\\
同様に完全三角形(\ref{canonical})により，
	\[[E^\bullet] = [\tau_{\le i}E^\bullet] + [\tau_{> i}E^\bullet]\]
繰り返し用いて，
\begin{align*}
	[E^\bullet] &= \sum_{i\in\ZZ}([\Im d_E^i[-i]] + [\Ker d_E^i[-i]])\\
							&= \sum_{i\in\ZZ}((-1)^i(-[\Im d_E^{i-1}] + [\Ker d_E^i])
							\intertext{$0\rightarrow\Im_{E}^{i-1}\rightarrow \Ker d_E^{i} \rightarrow \H^i(E)\rightarrow 0$の短完全列より}
							&= \sum_{i\in\ZZ}(-1)^i[\H^i(E^\bullet)]
\end{align*}
\end{proof}

\begin{lemm}
	$E\in\A$を$(\cdots\rightarrow 0\rightarrow E\rightarrow 0\rightarrow\cdots)\in\D^{b}(\A)$と$0$次にのみ$E$があるとする対応が誘導する写像
	\[K(\A)\rightarrow K(\D^b(\A))\]
	で群の同型が与えられる．
\end{lemm}
\begin{proof}
	$\A$での短完全列は$\D^b(\A)$での完全三角形を対応させるのでwell-definedである．\\
	\begin{gather*}
		\phi([E])\coloneq [(\cdots\rightarrow 0\rightarrow E\rightarrow 0\rightarrow \cdots)]\\
		\psi([E^\bullet])\coloneq \sum_i(-1)^i[\H^i(E^\bullet)]
	\end{gather*}
	と定めると互いに逆を与えている．
\end{proof}
\end{defn}
